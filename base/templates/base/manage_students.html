{% extends 'main.html' %}

{% load static %}
{% block content %}
<br>
<br>


<div class="bg-white mx-auto justify-center flex items-center text-center p-10 w-full max-w-lg">
    <div>
  <div class="container mx-auto mt-8">
    <h1 class="text-2xl font-bold mb-4">User List</h1>

    <table class="min-w-full divide-y divide-gray-200">
      <thead>
        <tr>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Avatar</th>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Username</th>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Courses</th>
        </tr>
      </thead>
      <tbody>
        {% for user in users %}
          <tr class="bg-white">
            <td class="px-6 py-4 whitespace-nowrap">
              {% if user.avatar %}
                <img src="{{ user.avatar.url }}" alt="{{ user.username }} Avatar" class="h-8 w-8 rounded-full">
              {% else %}
                <img src="{% static 'avatar.png' %}" alt="Default Avatar" class="h-8 w-8 rounded-full">
              {% endif %}
            </td>
            <td class="px-6 py-4 whitespace-nowrap">{{ user.username }}</td>
            <td class="px-6 py-4 whitespace-nowrap">{{ user.first_name }} {{ user.last_name }}</td>
            <td class="px-6 py-4 whitespace-nowrap">{{ user.email }}</td>
            <td class="px-6 py-4 whitespace-nowrap">
              {% if user.courses.exists %}
                  {% for course in user.courses.all %}
                      {{ course.title }}{% if not forloop.last %}, {% endif %}
                  {% endfor %}
              {% else %}
                  <p>No course</p>
              {% endif %}
          </td>
          
           
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>


    </div>
</div>

{% endblock content %}